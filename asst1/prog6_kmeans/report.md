## Using multi thread
Reading data.dat...
Running K-means with: M=1000000, N=100, K=3, epsilon=0.100000
this is the 1 iteration
[Total Time1]: 721.364 ms
[Total Time2]: 32.898 ms
[Total Time3]: 282.554 ms
this is the 2 iteration
[Total Time1]: 644.762 ms
[Total Time2]: 28.758 ms
[Total Time3]: 224.541 ms
this is the 3 iteration
[Total Time1]: 649.759 ms
[Total Time2]: 31.204 ms
[Total Time3]: 225.833 ms
this is the 4 iteration
[Total Time1]: 641.722 ms
[Total Time2]: 31.319 ms
[Total Time3]: 229.500 ms
this is the 5 iteration
[Total Time1]: 645.506 ms
[Total Time2]: 32.394 ms
[Total Time3]: 233.191 ms
this is the 6 iteration
[Total Time1]: 659.904 ms
[Total Time2]: 30.309 ms
[Total Time3]: 224.138 ms
this is the 7 iteration
[Total Time1]: 670.043 ms
[Total Time2]: 30.514 ms
[Total Time3]: 223.673 ms
this is the 8 iteration
[Total Time1]: 648.516 ms
[Total Time2]: 31.840 ms
[Total Time3]: 232.705 ms
this is the 9 iteration
[Total Time1]: 663.763 ms
[Total Time2]: 31.216 ms
[Total Time3]: 229.289 ms
this is the 10 iteration
[Total Time1]: 653.222 ms
[Total Time2]: 31.456 ms
[Total Time3]: 223.607 ms
this is the 11 iteration
[Total Time1]: 651.548 ms
[Total Time2]: 32.065 ms
[Total Time3]: 233.667 ms
this is the 12 iteration
[Total Time1]: 663.464 ms
[Total Time2]: 31.170 ms
[Total Time3]: 225.933 ms
this is the 13 iteration
[Total Time1]: 663.672 ms
[Total Time2]: 30.416 ms
[Total Time3]: 228.294 ms
this is the 14 iteration
[Total Time1]: 646.989 ms
[Total Time2]: 30.592 ms
[Total Time3]: 229.694 ms
this is the 15 iteration
[Total Time1]: 649.194 ms
[Total Time2]: 33.006 ms
[Total Time3]: 236.322 ms
this is the 16 iteration
[Total Time1]: 669.386 ms
[Total Time2]: 31.346 ms
[Total Time3]: 236.211 ms
this is the 17 iteration
[Total Time1]: 655.667 ms
[Total Time2]: 29.934 ms
[Total Time3]: 230.260 ms
this is the 18 iteration
[Total Time1]: 664.071 ms
[Total Time2]: 29.642 ms
[Total Time3]: 235.337 ms
this is the 19 iteration
[Total Time1]: 657.210 ms
[Total Time2]: 30.314 ms
[Total Time3]: 228.282 ms
this is the 20 iteration
[Total Time1]: 666.559 ms
[Total Time2]: 30.513 ms
[Total Time3]: 221.792 ms
this is the 21 iteration
[Total Time1]: 652.160 ms
[Total Time2]: 29.930 ms
[Total Time3]: 227.532 ms
this is the 22 iteration
[Total Time1]: 663.467 ms
[Total Time2]: 38.406 ms
[Total Time3]: 235.936 ms
this is the 23 iteration
[Total Time1]: 676.000 ms
[Total Time2]: 30.681 ms
[Total Time3]: 231.322 ms
this is the 24 iteration
[Total Time1]: 683.869 ms
[Total Time2]: 33.793 ms
[Total Time3]: 235.886 ms
K-Means converged after 24 iterations.
[Total Time]: 22183.644 ms

## using 
Reading data.dat...
Running K-means with: M=1000000, N=100, K=3, epsilon=0.100000
this is the 1 iteration
[Total Time1]: 130.920 ms
[Total Time2]: 34.480 ms
[Total Time3]: 27.477 ms
this is the 2 iteration
[Total Time1]: 71.037 ms
[Total Time2]: 33.514 ms
[Total Time3]: 29.215 ms
this is the 3 iteration
[Total Time1]: 67.442 ms
[Total Time2]: 33.441 ms
[Total Time3]: 27.858 ms
this is the 4 iteration
[Total Time1]: 72.591 ms
[Total Time2]: 55.528 ms
[Total Time3]: 41.986 ms
this is the 5 iteration
[Total Time1]: 99.328 ms
[Total Time2]: 31.599 ms
[Total Time3]: 26.862 ms
this is the 6 iteration
[Total Time1]: 67.796 ms
[Total Time2]: 31.037 ms
[Total Time3]: 24.369 ms
this is the 7 iteration
[Total Time1]: 65.907 ms
[Total Time2]: 31.412 ms
[Total Time3]: 24.264 ms
this is the 8 iteration
[Total Time1]: 67.054 ms
[Total Time2]: 31.273 ms
[Total Time3]: 24.096 ms
this is the 9 iteration
[Total Time1]: 70.315 ms
[Total Time2]: 34.217 ms
[Total Time3]: 26.156 ms
this is the 10 iteration
[Total Time1]: 66.543 ms
[Total Time2]: 31.587 ms
[Total Time3]: 25.087 ms
this is the 11 iteration
[Total Time1]: 65.811 ms
[Total Time2]: 31.644 ms
[Total Time3]: 26.829 ms
this is the 12 iteration
[Total Time1]: 69.882 ms
[Total Time2]: 31.040 ms
[Total Time3]: 25.620 ms
this is the 13 iteration
[Total Time1]: 67.464 ms
[Total Time2]: 32.789 ms
[Total Time3]: 26.021 ms
this is the 14 iteration
[Total Time1]: 70.626 ms
[Total Time2]: 30.614 ms
[Total Time3]: 25.730 ms
this is the 15 iteration
[Total Time1]: 65.181 ms
[Total Time2]: 30.968 ms
[Total Time3]: 27.252 ms
this is the 16 iteration
[Total Time1]: 67.145 ms
[Total Time2]: 33.402 ms
[Total Time3]: 27.306 ms
this is the 17 iteration
[Total Time1]: 64.071 ms
[Total Time2]: 35.102 ms
[Total Time3]: 25.351 ms
this is the 18 iteration
[Total Time1]: 66.111 ms
[Total Time2]: 35.536 ms
[Total Time3]: 25.168 ms
this is the 19 iteration
[Total Time1]: 65.397 ms
[Total Time2]: 31.824 ms
[Total Time3]: 26.382 ms
this is the 20 iteration
[Total Time1]: 73.776 ms
[Total Time2]: 30.271 ms
[Total Time3]: 26.820 ms
this is the 21 iteration
[Total Time1]: 66.218 ms
[Total Time2]: 31.682 ms
[Total Time3]: 25.311 ms
this is the 22 iteration
[Total Time1]: 68.405 ms
[Total Time2]: 33.593 ms
[Total Time3]: 26.071 ms
this is the 23 iteration
[Total Time1]: 66.322 ms
[Total Time2]: 31.657 ms
[Total Time3]: 26.469 ms
this is the 24 iteration
[Total Time1]: 69.098 ms
[Total Time2]: 31.858 ms
[Total Time3]: 25.376 ms
K-Means converged after 24 iterations.
[Total Time]: 3170.128 ms

after eliminating some index computing in for critical path
total time is improved to about 2.1s
Reading data.dat...
Running K-means with: M=1000000, N=100, K=3, epsilon=0.100000
K-Means converged after 24 iterations.
[Total Time]: 2009.684 ms

Maybe using a thred pool can prevent os form os context switch multi after while loop thread spaws
set as to do


This is the original code performance without O3
Reading data.dat...
Running K-means with: M=1000000, N=100, K=3, epsilon=0.100000
[Total Time]: 183056.403 ms